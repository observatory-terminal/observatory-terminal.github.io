<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Observatory Terminal</title>
    <style>
        body {
            background-color: black;
            color: lime;
            font-family: monospace;
            text-align: left;
            margin: 0;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        #terminal {
            border: none;
            width: 100vw;
            height: 100vh;
            overflow-y: auto;
            white-space: pre-wrap;
            padding: 20px;
            box-sizing: border-box;
        }
        #input-container {
            display: flex;
            align-items: center;
            margin-left: 10px;
        }
        #prompt {
            flex-shrink: 0;
            padding-left: 10px;
        }
        input {
            background: none;
            border: none;
            color: lime;
            font-family: monospace;
            outline: none;
            flex-grow: 1;
        }
        .hollow-rectangle {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 3px solid lime; /* Green border */
            box-sizing: border-box;
        }

    </style>
</head>
<body>
    <div id="terminal">
        > Observatory [1.0.0]
        > Ctrl R to reset.
        > Refresh if you cant type
        <br><br>
        <div id="input-container">
            <span id="prompt"></span><input type="text" id="input" autofocus>
        </div>
    </div>
    <div class="hollow-rectangle"></div>
    <audio id="code" src="assets/code.mp3"></audio> <!-- Replace with actual audio file path -->

    <script>
        (function() {
            const usernames = ["Alex", "Morgan", "Charlie", "Sam", "Jamie", "Jordan"];
            const passwords = ["hunter2", "password123", "letmein", "secret"];

            const randomUser = usernames[Math.floor(Math.random() * usernames.length)];
            const promptText = `C:/Users/${randomUser}/>`;
            document.getElementById("prompt").textContent = promptText;

            // Function to decode encoded string
            function decodeCode(code) {
                return String.fromCharCode.apply(null, code.split(',').map(Number));
            }

            const ceaser = "74, 85, 76, 73, 85, 83, 32, 67, 65, 69, 83, 65, 82, 32, 119, 97, 115, 32, 97, 32, 82, 111, 109, 97, 110, 32, 108, 101, 97, 100, 101, 114, 32, 97, 110, 100, 32, 109, 105, 108, 105, 116, 97, 114, 121, 32, 103, 101, 110, 101, 114, 97, 108, 44, 32, 107, 110, 111, 119, 110, 32, 102, 111, 114, 32, 104, 105, 115, 32, 115, 116, 114, 97, 116, 101, 103, 121, 32, 97, 110, 100, 32, 112, 111, 119, 101, 114, 46, 32, 68, 117, 114, 105, 110, 103, 32, 104, 105, 115, 32, 114, 101, 105, 103, 110, 44, 32, 104, 101, 32, 101, 120, 112, 97, 110, 100, 101, 100, 32, 116, 104, 101, 32, 82, 111, 109, 97, 110, 32, 69, 109, 112, 105, 114, 101, 32, 98, 121, 32, 99, 111, 110, 113, 117, 101, 114, 105, 110, 103, 32, 111, 118, 101, 114, 32, 50, 48, 44, 51, 57, 50, 32, 115, 113, 117, 97, 114, 101, 32, 109, 105, 108, 101, 115, 32, 111, 102, 32, 108, 97, 110, 100, 44, 32, 109, 97, 107, 105, 110, 103, 32, 115, 117, 114, 101, 32, 104, 105, 115, 32, 108, 101, 103, 97, 99, 121, 32, 119, 97, 115, 32, 111, 102, 32, 111, 110, 101, 32, 111, 102, 32, 104, 105, 115, 116, 111, 114, 121,39,115,32,109,111,115,116,32,105,109,112,111,114,116,97,110,116,32,102,105,103,117,114,101,115,46,32,72,105,115,32,109,105,108,105,116,97,114,121,32,99,111,110,113,117,101,115,116,115,32,112,108,97,121,101,100,32,97,110,32,105,109,112,111,114,116,97,110,116,32,114,111,108,101,32,105,110,32,116,104,101,32,101,110,100,32,111,102,32,116,104,101,32,82,111,109,97,110,32,82,101,112,117,98,108,105,99,44,32,104,97,118,105,110,103,32,115,101,116,32,116,104,101,32,115,116,97,103,101,32,102,111,114,32,116,104,101,32,110,101,120,116,32,104,101,105,114,32,116,111,32,116,104,101,32,116,104,114,111,110,101,44,32,65,117,103,117,115,116,117,115,46";
            const cypher = "113,32,106,109,116,113,109,100,109,32,98,112,113,97,32,106,105,98,107,112,32,119,110,32,97,99,106,114,109,107,98,97,32,101,113,116,116,32,106,109,32,113,118,98,122,109,97,98,113,118,111,46,46,46,32,119,118,116,103,32,119,118,107,109,32,113,118,32,105,32,110,109,101,32,112,99,118,108,122,109,108,32,108,119,32,103,119,99,32,111,109,98,32,97,119,117,109,32,105,107,98,99,105,116,116,103,32,110,99,118,32,119,118,109,97,46";

            document.getElementById("input").addEventListener("keydown", function(event) {
                if (event.key === "Enter") {
                    event.preventDefault();
                    const inputValue = this.value.trim();
                    this.value = "";
                    let terminal = document.getElementById("terminal");
                    let body = document.body;

                    if (inputValue === decodeCode("54,52,50,56")) {
                        const output = decodeCode(ceaser);
                        terminal.innerHTML += `\n${output}`;
                        return;
                    } else if (inputValue === decodeCode("50,48,51,52")) {
                        let audio = document.getElementById("code");
                        audio.pause(); 
                        audio.currentTime = 0;
                        audio.play().catch(error => console.log("Audio play error:", error));
                        
                        // Black out the terminal during the song
                        terminal.innerHTML = `<span id="prompt">${promptText}</span><input type="text" id="input" autofocus>`;
                        document.body.style.backgroundColor = 'black'; // Black background
                        document.body.style.color = 'black'; // Hide text content
                    } else if (inputValue === decodeCode("56,50,52,55")) {
                        const output = decodeCode(cypher);
                        terminal.innerHTML += `\n${output}`;
                        return;
                    } else if (inputValue == decodeCode("57,48,49,51")) {
                        window.location.href = "picasso.html";
                        return;
                    }
                }
                
                if (event.ctrlKey && event.key === 'r') {
                    event.preventDefault(); // Prevent default browser refresh action
                    location.reload(); // Refresh the page
                }
            });
        })();
    </script>
</body>
</html>
